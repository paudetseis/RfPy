

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scripts &mdash; Home 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Classes" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Home
          

          
            
            <img src="_static/RfPy_logo_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Quick Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="links.html">GitHub Repositories</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html#references">References</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rfpy.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="rfpy.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rfpy.html#basic-usage">Basic Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#modules">Modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Scripts &amp; Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-calc-py"><code class="docutils literal notranslate"><span class="pre">rfpy_calc.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-recalc-py"><code class="docutils literal notranslate"><span class="pre">rfpy_recalc.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-plot-py"><code class="docutils literal notranslate"><span class="pre">rfpy_plot.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-hk-py"><code class="docutils literal notranslate"><span class="pre">rfpy_hk.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-harmonics-py"><code class="docutils literal notranslate"><span class="pre">rfpy_harmonics.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rfpy-ccp-py"><code class="docutils literal notranslate"><span class="pre">rfpy_ccp.py</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Home</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/scripts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scripts">
<h1>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h1>
<p>There are several Python scripts that accompany <code class="xref py py-mod docutils literal notranslate"><span class="pre">rfpy</span></code>, which can be used
in bash scripts to automate data processing. These include scripts to download
three-component seismogram data and calculate receiver functions, and perform
post-processing for <cite>H-k</cite> stacking and harmonic decomposition. All of them use
a station database provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
<div class="section" id="rfpy-calc-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_calc.py</span></code><a class="headerlink" href="#rfpy-calc-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="description">
<h3>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>Downloads three-component (‘Z’, ‘N’ and ‘E’) seismograms based
on available times of earthquakes and performs <cite>P</cite>-wave receiver function
calculation. Station selection is specified by a network and
station code. The database is provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_calc.py -h

##############################################
#        __                          _       #
#  _ __ / _|_ __  _   _     ___ __ _| | ___  #
# | &#39;__| |_| &#39;_ \| | | |   / __/ _` | |/ __| #
# | |  |  _| |_) | |_| |  | (_| (_| | | (__  #
# |_|  |_| | .__/ \__, |___\___\__,_|_|\___| #
#          |_|    |___/_____|                #
#                                            #
##############################################

usage: rfpy_calc.py [arguments] &lt;station database&gt;

Script used to download and pre-process three-component (&#39;Z&#39;, &#39;N&#39;, and &#39;E&#39;),
seismograms for individual events and calculate teleseismic P-wave receiver
functionsThis version requests data on the fly for a given date range. Data
are requested from the internet using the client services framework. The
stations are processed one by one and the data are stored to disk.

positional arguments:
  indb                  Station Database to process from.

optional arguments:
  -h, --help            show this help message and exit
  --keys STKEYS         Specify a comma separated list of station keys for
                        which to perform the analysis. These must be contained
                        within the station database. Partial keys will be used
                        to match against those in the dictionary. For
                        instance, providing IU will match with all stations in
                        the IU network [Default processes all stations in the
                        database]
  -v, -V, --verbose     Specify to increase verbosity.
  -O, --overwrite       Force the overwriting of pre-existing data. [Default
                        False]

Server Settings:
  Settings associated with which datacenter to log into.

  -S SERVER, --Server SERVER
                        Specify the server to connect to. Options include:
                        BGR, ETH, GEONET, GFZ, INGV, IPGP, IRIS, KOERI, LMU,
                        NCEDC, NEIP, NERIES, ODC, ORFEUS, RESIF, SCEDC, USGS,
                        USP. [Default IRIS]
  -U USERAUTH, --User-Auth USERAUTH
                        Enter your IRIS Authentification Username and Password
                        (--User-Auth=&#39;username:authpassword&#39;) to access and
                        download restricted data. [Default no user and
                        password]

Local Data Settings:
  Settings associated with defining and using a local data base of pre-
  downloaded day-long SAC files.

  --local-data LOCALDATA
                        Specify a comma separated list of paths containing
                        day-long sac files of data already downloaded. If data
                        exists for a seismogram is already present on disk, it
                        is selected preferentially over downloading the data
                        using the Client interface
  --no-data-zero        Specify to force missing data to be set as zero,
                        rather than default behaviour which sets to nan.
  --no-local-net        Specify to prevent using the Network code in the
                        search for local data (sometimes for CN stations the
                        dictionary name for a station may disagree with that
                        in the filename. [Default Network used]
  --save-Z12            Specify to save Z12 (un-rotated) components. [Default
                        False]

Event Settings:
  Settings associated with refining the events to include in matching event-
  station pairs

  --start STARTT        Specify a UTCDateTime compatible string representing
                        the start time for the event search. This will
                        override any station start times. [Default start date
                        of station]
  --end ENDT            Specify a UTCDateTime compatible string representing
                        the end time for the event search. This will override
                        any station end times [Default end date of station]
  --reverse, -R         Reverse order of events. Default behaviour starts at
                        oldest event and works towards most recent. Specify
                        reverse order and instead the program will start with
                        the most recent events and work towards older
  --minmag MINMAG       Specify the minimum magnitude of event for which to
                        search. [Default 6.0]
  --maxmag MAXMAG       Specify the maximum magnitude of event for which to
                        search. [Default None, i.e. no limit]

Geometry Settings:
  Settings associatd with the event-station geometries for the specified
  phase

  --phase PHASE         Specify the phase name to use. Be careful with the
                        distance. setting. Options are &#39;P&#39; or &#39;PP&#39;. [Default
                        &#39;P&#39;]
  --mindist MINDIST     Specify the minimum great circle distance (degrees)
                        between the station and event. [Default depends on
                        phase]
  --maxdist MAXDIST     Specify the maximum great circle distance (degrees)
                        between the station and event. [Default depends on
                        phase]

Parameter Settings:
  Miscellaneous default values and settings

  --sampling-rate NEW_SAMPLING_RATE
                        Specify new sampling rate in Hz. [Default 10.]
  --dts DTS             Specify the window length in sec (symmetric about
                        arrival time). [Default 150.]
  --align ALIGN         Specify component alignment key. Can be either ZRT,
                        LQT, or PVH. [Default ZRT]
  --vp VP               Specify near-surface Vp to use with --align=PVH
                        (km/s). [Default 6.0]
  --vs VS               Specify near-surface Vs to use with --align=PVH
                        (km/s). [Default 3.5]
  --dt-snr DT_SNR       Specify the window length over which to calculate the
                        SNR in sec. [Default 30.]
  --pre-filt PRE_FILT   Specify two floats with low and high frequency corners
                        for pre-filter (before deconvolution). [Default None]
  --fmin FMIN           Specify the minimum frequency corner for SNR and CC
                        filter (Hz). [Default 0.05]
  --fmax FMAX           Specify the maximum frequency corner for SNR and CC
                        filter (Hz). [Default 1.0]

Deconvolution Settings:
  Parameters for deconvolution

  --method METHOD       Specify the deconvolution method. Available methods
                        include &#39;wiener&#39;, &#39;water&#39; and &#39;multitaper&#39;. [Default
                        &#39;wiener&#39;]
  --gfilt GFILT         Specify the Gaussian filter width in Hz. [Default
                        None]
  --wlevel WLEVEL       Specify the water level, used in the &#39;water&#39; method.
                        [Default 0.01]
</pre></div>
</div>
</div>
</div>
<div class="section" id="rfpy-recalc-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_recalc.py</span></code><a class="headerlink" href="#rfpy-recalc-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Description<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Looks for available receiver functions on disk and re-calculates them
using different processing options. Station selection is specified by
a network and station code. The database is provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code>
dictionary.</p>
</div>
<div class="section" id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_recalc.py -h

########################################################
#                                                      #
#        __                                    _       #
#  _ __ / _|_ __  _   _     _ __ ___  ___ __ _| | ___  #
# | &#39;__| |_| &#39;_ \| | | |   | &#39;__/ _ \/ __/ _` | |/ __| #
# | |  |  _| |_) | |_| |   | | |  __/ (_| (_| | | (__  #
# |_|  |_| | .__/ \__, |___|_|  \___|\___\__,_|_|\___| #
#          |_|    |___/_____|                          #
#                                                      #
########################################################

usage: rfpy_recalc.py [arguments] &lt;station database&gt;

Script used to re-calculate receiver functions that already exist on disk, but
using different processing options. The stations are processed one by one and
the data are stored to disk. Note: The sampling rate cannot be changed to a
new rate

positional arguments:
  indb                 Station Database to process from.

optional arguments:
  -h, --help           show this help message and exit
  --keys STKEYS        Specify a comma separated list of station keys for
                       which to perform the analysis. These must be contained
                       within the station database. Partial keys will be used
                       to match against those in the dictionary. For instance,
                       providing IU will match with all stations in the IU
                       network [Default processes all stations in the
                       database]
  -v, -V, --verbose    Specify to increase verbosity.

Parameter Settings:
  Miscellaneous default values and settings

  --Z12                Use Z12 data if available. [Default uses ZNE data]
  --phase PHASE        Specify the phase name to use. Be careful with the
                       distance. setting. Options are &#39;P&#39;, &#39;PP&#39;, &#39;allP&#39;, &#39;S&#39;,
                       &#39;SKS&#39; or &#39;allS&#39;. [Default &#39;allP&#39;]
  --align ALIGN        Specify component alignment key. Can be either ZRT,
                       LQT, or PVH. [Default ZRT]
  --vp VP              Specify near-surface Vp to use with --align=PVH (km/s).
                       [Default 6.0]
  --vs VS              Specify near-surface Vs to use with --align=PVH (km/s).
                       [Default 3.5]
  --dt-snr DT_SNR      Specify the window length over which to calculate the
                       SNR in sec. [Default 30.]
  --pre-filt PRE_FILT  Specify two floats with low and high frequency corners
                       for pre-filter (before deconvolution). [Default None]
  --fmin FMIN          Specify the minimum frequency corner for SNR filter
                       (Hz). [Default 0.05]
  --fmax FMAX          Specify the maximum frequency corner for SNR filter
                       (Hz). [Default 1.0]

Deconvolution Settings:
  Parameters for deconvolution

  --method METHOD      Specify the deconvolution method. Available methods
                       include &#39;wiener&#39;, &#39;water&#39; and &#39;multitaper&#39;. [Default
                       &#39;wiener&#39;]
  --gfilt GFILT        Specify the Gaussian filter width in Hz. [Default None]
  --wlevel WLEVEL      Specify the water level, used in the &#39;water&#39; method.
                       [Default 0.01]
</pre></div>
</div>
</div>
</div>
<div class="section" id="rfpy-plot-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_plot.py</span></code><a class="headerlink" href="#rfpy-plot-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Description<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Script used to make plots of receiver function panels sorted by
back-azimuth (averaging all slowness information) or by slowness
(averaging all back-azimuth information).</p>
</div>
<div class="section" id="id4">
<h3>Usage<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_recalc.py -h

#################################################
#        __                        _       _    #
#  _ __ / _|_ __  _   _      _ __ | | ___ | |_  #
# | &#39;__| |_| &#39;_ \| | | |    | &#39;_ \| |/ _ \| __| #
# | |  |  _| |_) | |_| |    | |_) | | (_) | |_  #
# |_|  |_| | .__/ \__, |____| .__/|_|\___/ \__| #
#          |_|    |___/_____|_|                 #
#                                               #
#################################################

usage: rfpy_plot.py [arguments] &lt;station database&gt;

Script used to plot receiver function data

positional arguments:
  indb                  Station Database to process from.

optional arguments:
  -h, --help            show this help message and exit
  --keys STKEYS         Specify a comma separated list of station keys for
                        which to perform the analysis. These must be contained
                        within the station database. Partial keys will be used
                        to match against those in the dictionary. For
                        instance, providing IU will match with all stations in
                        the IU network [Default processes all stations in the
                        database]
  -v, -V, --verbose     Specify to increase verbosity.
  -O, --overwrite       Force the overwriting of pre-existing figures.
                        [Default False]

Pre-processing Settings:
  Options for pre-processing of receiver function data before plotting

  --snr SNR             Specify the vertical component SNR threshold for
                        extracting receiver functions. [Default 5.]
  --snrh SNRH           Specify the horizontal component SNR threshold for
                        extracting receiver functions. [Default None]
  --cc CC               Specify the CC threshold for extracting receiver
                        functions. [Default None]
  --no-outlier          Set this option to delete outliers based on the MAD on
                        the variance. [Default False]
  --binlim BINLIM       Specify the minimum number of RFs in each bin.
                        [Default 3]
  --bp BP               Specify the corner frequencies for the bandpass
                        filter. [Default no filtering]
  --pws                 Set this option to use phase-weighted stacking during
                        binning [Default False]
  --nbaz NBAZ           Specify integer number of back-azimuth bins to
                        consider (typically 36 or 72). If not None, the plot
                        will show receiver functions sorted by back-azimuth
                        values. [Default None]
  --nslow NSLOW         Specify integer number of slowness bins to consider
                        (typically 20 or 40). If not None, the plot will show
                        receiver functions sorted by slowness values. [Default
                        None]
  --slowbound SLOWBOUND
                        Specify a list of two floats with minimum and
                        maximumbounds on slowness (s/km). [Default [0.04,
                        0.08]]
  --bazbound BAZBOUND   Specify a list of two floats with minimum and
                        maximumbounds on back azimuth (degrees). [Default [0,
                        360]]
  --phase PHASE         Specify the phase name to plot. Options are &#39;P&#39;, &#39;PP&#39;,
                        &#39;allP&#39;, &#39;S&#39;, &#39;SKS&#39; or &#39;allS&#39;. [Default &#39;allP&#39;]

Plot Settings:
  Options for plot format

  --scale SCALE         Specify the scaling factor for the amplitude of the
                        receiver functions in the wiggle plots. [Default 100.
                        for a back-azimuth plot, 0.02 for a slowness plot]
  --normalize           Set this option to produce receiver functions
                        normalized by the max amplitude of stacked RFs.
                        [Default False]
  --trange TRANGE       Specify the time range for the x-axis (sec). Negative
                        times are allowed [Default 0., 30.]
  --stacked             Set this option to plot a stack of all traces in top
                        panel. [Default does not plot stacked traces]
  --save                Set this option if you wish to save the figure.
                        [Default does not save figure]
  --title TITLEPLOT     Specify title of figure. [Default None]
  --format FORM         Specify format of figure. Can be any one of the
                        validmatplotlib formats: &#39;png&#39;, &#39;jpg&#39;, &#39;eps&#39;, &#39;pdf&#39;.
                        [Default &#39;png&#39;]
  --plot-event-dist     Plot distribution of events on map. Other Plotting
                        Options will be applied to this figure (title, save,
                        etc.). [Default no plot]
</pre></div>
</div>
</div>
</div>
<div class="section" id="rfpy-hk-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_hk.py</span></code><a class="headerlink" href="#rfpy-hk-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Description<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Loads radial-component receiver function data available on disk
and calculates Moho depth (‘H’) and Vp/Vs (‘k’) of the assumed 1D
crustal structure. Station selection is specified by a network and
station code. The database is provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
</div>
<div class="section" id="id6">
<h3>Usage<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_hk.py -h

#########################################
#        __                 _     _     #
#  _ __ / _|_ __  _   _    | |__ | | __ #
# | &#39;__| |_| &#39;_ \| | | |   | &#39;_ \| |/ / #
# | |  |  _| |_) | |_| |   | | | |   &lt;  #
# |_|  |_| | .__/ \__, |___|_| |_|_|\_\ #
#          |_|    |___/_____|           #
#                                       #
#########################################

usage: rfpy_hk.py [arguments] &lt;station database&gt;

Script used to process receiver function data for H-k stacking.

positional arguments:
  indb                  Station Database to process from.

optional arguments:
  -h, --help            show this help message and exit
  --keys STKEYS         Specify a comma separated list of station keys for
                        which to perform the analysis. These must be contained
                        within the station database. Partial keys will be used
                        to match against those in the dictionary. For
                        instance, providing IU will match with all stations in
                        the IU network [Default processes all stations in the
                        database]
  -v, -V, --verbose     Specify to increase verbosity.
  -O, --overwrite       Force the overwriting of pre-existing data. [Default
                        False]

Time Settings:
  Settings associated with refining the times to include in searching for
  receiver function data

  --start STARTT        Specify a UTCDateTime compatible string representing
                        the start time for the search. This will override any
                        station start times. [Default start date of station]
  --end ENDT            Specify a UTCDateTime compatible string representing
                        the end time for the search. This will override any
                        station end times [Default end date of station]

Pre-processing Settings:
  Options for pre-processing of receiver function data prior to H-k stacking

  --binlim BINLIM       Specify the minimum number of RFs in each bin.
                        [Default 3]
  --bp BP               Specify the corner frequencies for the bandpass
                        filter. [Default 0.05,0.5]
  --nbaz NBAZ           Specify integer number of back-azimuth bins to
                        consider. [Default 36]
  --nslow NSLOW         Specify integer number of slowness bins to consider.
                        [Default 40]
  --snr SNR             Specify the SNR threshold for extracting receiver
                        functions. [Default None]
  --snrh SNRH           Specify the horizontal component SNR threshold for
                        extracting receiver functions. [Default None]
  --cc CC               Specify the CC threshold for extracting receiver
                        functions. [Default None]
  --no-outlier          Set this option to delete outliers based on the MAD on
                        the variance. [Default False]
  --slowbound SLOWBOUND
                        Specify a list of two floats with minimum and
                        maximumbounds on slowness (s/km). [Default [0.04,
                        0.08]]
  --bazbound BAZBOUND   Specify a list of two floats with minimum and
                        maximumbounds on back azimuth (degrees). [Default [0,
                        360]]
  --pws                 Set this option to use phase-weighted stacking during
                        binning [Default False]
  --phase PHASE         Specify the phase name to plot. Options are &#39;P&#39;, &#39;PP&#39;,
                        &#39;allP&#39;, &#39;S&#39;, &#39;SKS&#39; or &#39;allS&#39;. [Default &#39;allP&#39;]
  --copy                Set this option to use a copy of the radial component
                        filtered at different corners for the Pps and Pss
                        phases. [Default False]
  --bp-copy BP_COPY     Specify a list of two floats with minimum and
                        maximumfrequency for the copies stream (Hz). [Default
                        [0.05, 0.35]]

Settings for H-k Stacking:
  Specify parameters of H-k search, includingbounds on search, weights, type
  of stacking, etc.

  --hbound HBOUND       Specify a list of two floats with minimum and
                        maximumbounds on Moho depth (H, in km). [Default [20.,
                        50.]]
  --dh DH               Specify search interval for H (km). [Default 0.5]
  --kbound KBOUND       Specify a list of two floats with minimum and
                        maximumbounds on Vp/Vs (k). [Default [1.56, 2.1]]
  --dk DK               Specify search interval for k. [Default 0.02]
  --weights WEIGHTS     Specify a list of three floats with for Ps, Pps and
                        Pass weights in final stack. [Default [0.5, 2., -1.]]
  --type TYP            Specify type of final stacking. Options are: &#39;sum&#39; for
                        a weighted average (using weights), or &#39;product&#39; for
                        the product of positive values in stacks. [Default
                        &#39;sum&#39;]
  --save                Set this option to save the HkStack object to file.
                        [Default doesn&#39;t save]

Model Settings:
  Miscellaneous default values and settings

  --vp VP               Specify mean crustal Vp (km/s). [Default 6.0]
  --strike STRIKE       Specify the strike of dipping Moho. [Default None]
  --dip DIP             Specify the dip of dipping Moho. [Default None]

Settings for plotting results:
  Specify parameters for plotting the H-k stacks.

  --plot                Set this option to produce a plot of the stacks
                        [Default does not produce plot]
  --save-plot           Set this option to save the plot [Default doesn&#39;t
                        save]
  --title TITLE         Specify plot title [Default has no title]
  --format FORM         Specify format of figure. Can be any one of the
                        validmatplotlib formats: &#39;png&#39;, &#39;jpg&#39;, &#39;eps&#39;, &#39;pdf&#39;.
                        [Default &#39;png&#39;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="rfpy-harmonics-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_harmonics.py</span></code><a class="headerlink" href="#rfpy-harmonics-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Description<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Loads radial and transverse component receiver function data available on disk
and decomposes them into back-azimuth harmonics. Station selection is specified
by a network and station code. The database is provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code>
dictionary.</p>
</div>
<div class="section" id="id8">
<h3>Usage<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_harmonics.py -h

################################################################################
#        __                 _                                      _           #
#  _ __ / _|_ __  _   _    | |__   __ _ _ __ _ __ ___   ___  _ __ (_) ___ ___  #
# | &#39;__| |_| &#39;_ \| | | |   | &#39;_ \ / _` | &#39;__| &#39;_ ` _ \ / _ \| &#39;_ \| |/ __/ __| #
# | |  |  _| |_) | |_| |   | | | | (_| | |  | | | | | | (_) | | | | | (__\__ \ #
# |_|  |_| | .__/ \__, |___|_| |_|\__,_|_|  |_| |_| |_|\___/|_| |_|_|\___|___/ #
#          |_|    |___/_____|                                                  #
#                                                                              #
################################################################################

usage: rfpy_harmonics.py [arguments] &lt;station database&gt;

Script used to process receiver function data for harmonic decomposition.

positional arguments:
  indb               Station Database to process from.

optional arguments:
  -h, --help         show this help message and exit
  --keys STKEYS      Specify a comma separated list of station keys for which
                     to perform the analysis. These must be contained within
                     the station database. Partial keys will be used to match
                     against those in the dictionary. For instance, providing
                     IU will match with all stations in the IU network
                     [Default processes all stations in the database]
  -v, -V, --verbose  Specify to increase verbosity.
  -O, --overwrite    Force the overwriting of pre-existing data. [Default
                     False]

Time Settings:
  Settings associated with refining the times to include in searching for
  receiver function data

  --start STARTT     Specify a UTCDateTime compatible string representing the
                     start time for the search. This will override any station
                     start times. [Default start date of station]
  --end ENDT         Specify a UTCDateTime compatible string representing the
                     end time for the search. This will override any station
                     end times [Default end date of station]

Pre-processing Settings:
  Options for pre-processing of receiver function data prior to harmonic
  decomposition

  --bp BP            Specify the corner frequencies for the bandpass filter.
                     [Default 0.05,0.5]
  --bin NBIN         Specify integer number of back-azimuth bins to consider
                     (typically 36 or 72). [Default does not bin data]
  --snr SNR          Specify the SNR threshold for extracting receiver
                     functions. [Default None]
  --snrh SNRH        Specify the horizontal component SNR threshold for
                     extracting receiver functions. [Default None]
  --cc CC            Specify the CC threshold for extracting receiver
                     functions. [Default None]
  --no-outlier       Set this option to delete outliers based on the MAD on
                     the variance. [Default False]

Settings for harmonic decomposition:
  Specify parameters for the decomposition, e.g. a fixed azimuth, depth
  range for finding the optimal azimuth, etc.

  --azim AZIM        Specify the azimuth angle along with to perform the
                     decomposition. [Default 0.]
  --find-azim        Set this option to calculate the optimal azimuth.
                     [Default uses the &#39;--azim&#39; value]
  --trange TRANGE    Specify a list of two floats with minimum and
                     maximumbounds on time range for finding the optimal
                     azimuth (sec). [Default [0., 10.] when &#39;--find-azim&#39; is
                     set]
  --save             Set this option to save the Harmonics object to a pickled
                     file. [Default does not save object]

Settings for plotting results:
  Specify parameters for plotting the back-azimuth harmonics.

  --plot             Set this option to produce a plot of the back-azimuth
                     harmonics
  --ymax YMAX        Specify the maximum y axis value for the plot in units of
                     thedependent variable (e.g., sec). [Default 30.]
  --scale SCALE      Specify the scaling value that multiplies the amplitude
                     of the harmonic components. [Default 10.]
  --save-plot        Set this option to save the plot [Default doesn&#39;t save]
  --title TITLE      Specify plot title [Default has no title]
  --format FORM      Specify format of figure. Can be any one of the
                     validmatplotlib formats: &#39;png&#39;, &#39;jpg&#39;, &#39;eps&#39;, &#39;pdf&#39;.
                     [Default &#39;png&#39;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="rfpy-ccp-py">
<h2><code class="docutils literal notranslate"><span class="pre">rfpy_ccp.py</span></code><a class="headerlink" href="#rfpy-ccp-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Description<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Loads radial component receiver function data available on disk
and processes them for Common Conversion Point stacking along a linear
profile. The three CCP phase stacks (Ps, Pps and Pss) are averaged
using a weighted sum, or using phase-weighted stacking to downweight
incoherent signal across all stacks. The phase stacks can be further
smoothed using a Gaussian kernel that simulates P-wave sensitivity.
Station selection is specified by a network and station code.
The database is provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The start and end coordinates (latitude, longitude) of the profile
must be supplied as <cite>–start=</cite> and <cite>–end=</cite> parameters. The CCP
stacks will be projected along the line, regardless of station distance
normal to the line.</p>
</div>
</div>
<div class="section" id="id10">
<h3>Usage<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rfpy_ccp.py -h

############################################
#        __                                #
#  _ __ / _|_ __  _   _     ___ ___ _ __   #
# | &#39;__| |_| &#39;_ \| | | |   / __/ __| &#39;_ \  #
# | |  |  _| |_) | |_| |  | (_| (__| |_) | #
# |_|  |_| | .__/ \__, |___\___\___| .__/  #
#          |_|    |___/_____|      |_|     #
#                                          #
############################################

usage: rfpy_ccp.py [arguments] &lt;station database&gt;

Script used to process receiver function data for common-conversion-point
(CCP) imaging.

positional arguments:
  indb                 Station Database to process from.

optional arguments:
  -h, --help           show this help message and exit
  --keys STKEYS        Specify a comma separated list of station keys for
                       which to perform the analysis. These must be contained
                       within the station database. Partial keys will be used
                       to match against those in the dictionary. For instance,
                       providing IU will match with all stations in the IU
                       network [Default processes all stations in the
                       database]
  -v, -V, --verbose    Specify to increase verbosity.
  -O, --overwrite      Force the overwriting of pre-existing data. [Default
                       False]

Line Geometry Settings:
  Options for defining the line along which to produce the CCP image

  --start COORD_START  Specify a list of two floats with the latitude and
                       longitude of the start point, in this respective order.
                       [Exception raised if not specified]
  --end COORD_END      Specify a list of two floats with the latitude and
                       longitudeof the end point, in this respective order.
                       [Exception raised if not specified]
  --dz DZ              Specify vertical cell size in km. [Default 1.]
  --dx DX              Specify horizontal cell size in km. [Default 2.5]

Pre-processing Settings:
  Options for pre-processing of receiver function data for CCP stacking

  --snr SNR            Specify the SNR threshold for extracting receiver
                       functions. [Default None]
  --snrh SNRH          Specify the horizontal component SNR threshold for
                       extracting receiver functions. [Default None]
  --cc CC              Specify the CC threshold for extracting receiver
                       functions. [Default None]
  --no-outlier         Set this option to delete outliers based on the MAD on
                       the variance. [Default False]
  --binlim BINLIM      Specify the minimum number of RFs in each bin. [Default
                       3]
  --f1 F1              Specify the low frequency corner for the bandpass
                       filter for all phases (Hz). [Default [0.05]]
  --f2ps F2PS          Specify the high frequency corner for the bandpass
                       filter for the Ps phase (Hz). [Default [0.75]]
  --f2pps F2PPS        Specify the high frequency corner for the bandpass
                       filter for the Pps phase (Hz). [Default [0.36]]
  --f2pss F2PSS        Specify the high frequency corner for the bandpass
                       filter for the Pss phase (Hz). [Default [0.3]]
  --nbaz NBAZ          Specify integer number of back-azimuth bins to
                       consider. [Default 36]
  --nslow NSLOW        Specify integer number of slowness bins to consider.
                       [Default 40]
  --wlen WLEN          Specify wavelength of P-wave as sensitivity (km).
                       [Default 35.]
  --phase PHASE        Specify the phase name to plot. Options are &#39;P&#39;, &#39;PP&#39;,
                       &#39;allP&#39;, &#39;S&#39;, &#39;SKS&#39; or &#39;allS&#39;. [Default &#39;allP&#39;]

CCP Settings:
  Options for specifying the type of CCP stacking to perform

  --load               Step 1. Set this option to load rfstreams into CCPimage
                       object. [Default False]
  --prep               Step 2. Set this option to prepare CCPimage before pre-
                       stacking. [Default False]
  --prestack           Step 3. Set this option to prestack all phases before
                       CCP averaging. [Default False]
  --ccp                Step 4a. Set this option for standard CCP stacking with
                       multiples. [Default False]
  --gccp               Step 4b. Set this option for Gaussian-weighted CCP
                       stacking with multiples. [Default False]
  --linear             Step 5a. Set this option to produce a linear, weighted
                       stack for the final [G]CCP image. [Default True unless
                       --phase is set]
  --pws                Step 5b. Set this option to produce a phase weighted
                       stack for the final [G]CCP image. [Default False]
  --weights WEIGHTS    Option to define weights for each of the three phases:
                       Ps, Pps and Pss, by specifying three comma-separated
                       floats. [Default 1., 3., -3.]

Figure Settings:
  Options for specifying the settings for the final figure

  --figure             Set this option to plot the final [G]CCP figure.
                       [Default False]
  --cbound CBOUND      Set the maximum value for the color palette. [Default
                       0.05 for --ccp or 0.015 for --gccp]
  --save-fig           Set this option to save the final [G]CCP figure. This
                       option can only be set if --figure is also set.[Default
                       False]
  --title TITLE        Set Figure title. [Default None]
  --format FMT         Set format of figure. You can choose among &#39;png&#39;,
                       &#39;jpg&#39;, &#39;eps&#39;, &#39;pdf&#39;. [Default &#39;png&#39;]
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="Classes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Pascal Audet

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>